<!DOCTYPE html>
<html>
<head>
  <title>Step Counter</title>
</head>
<body>
  <h1>Step Counter</h1>
  <button id="startButton">Start</button>
  <button id="stopButton" disabled>Stop</button>
  <p>Step Count: <span id="stepCount">0</span></p>

  <script>
    let stepCount = 0;
    let isStepDetected = false;
    let previousY = null;
    const threshold = 1; // Adjust the threshold value based on your requirements

    function startStepCounter() {
      if (window.DeviceMotionEvent) {
        window.addEventListener('devicemotion', motionHandler, false);
        document.getElementById('startButton').disabled = true;
        document.getElementById('stopButton').disabled = false;
      } else {
        console.log('DeviceMotionEvent not supported');
      }
    }

    function stopStepCounter() {
      window.removeEventListener('devicemotion', motionHandler, false);
      document.getElementById('startButton').disabled = false;
      document.getElementById('stopButton').disabled = true;
    }

    function motionHandler(event) {
      const acceleration = event.accelerationIncludingGravity;
      const currentY = acceleration.y;

      if (previousY !== null) {
        const deltaY = Math.abs(currentY - previousY);

        if (!isStepDetected && deltaY > threshold) {
          isStepDetected = true;
        } else if (isStepDetected && deltaY <= threshold) {
          isStepDetected = false;
          stepCount++;
          document.getElementById('stepCount').textContent = stepCount;
        }
      }

      previousY = currentY;
    }

    document.getElementById('startButton').addEventListener('click', startStepCounter);
    document.getElementById('stopButton').addEventListener('click', stopStepCounter);
  </script>
</body>
</html>
